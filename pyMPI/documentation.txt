### Tir√© de http://www.nersc.gov/users/computational-systems/retired-systems/carver/running-jobs/batch-jobs/

Using Python
One can use a python's mpi4py module to launch multiple serial jobs. Below is a sample python script, 'mwrapper.py':
01	#!/usr/bin/env python
02	from mpi4py import MPI
03	from subprocess import call
04	import sys
05	exctbl = sys.argv[1]
06	comm = MPI.COMM_WORLD
07	rank = comm.Get_rank()
08	myDir = "dir"+str(rank).zfill(2)
09	cmd = "cd "+myDir+" ; "+exctbl+" < infile > outfile"
10	sts = call(cmd,shell=True)
11	comm.Barrier()
Below is a batch script to use it for a serial program, a.out:
1	#!/bin/bash -l
2	#PBS -q regular
3	#PBS -l nodes=1:ppn=8
4	#PBS -l walltime=1:00:00
5	#PBS -l pvmem=2GB
6	 
7	module load python/2.7.3 mpi4py
8	cd $PBS_O_WORKDIR
9	mpirun -np 8 mwrapper.py $PBS_O_WORKDIR/a.out

